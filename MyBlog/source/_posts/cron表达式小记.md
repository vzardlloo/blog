---
title: cron表达式小记
date: 2019-04-08 14:58:43
tags: 杂记
---

### 简介

​     Cron表达式的作用是用来配置定时任务，它是一个字符串，由七个元素或者说叫域组成的，元素之间用空格来分割。

​	组成Cron表达式的七个元素及其可能出现的值分别是:

| 元素 | Seconds           | Minutes           | Hours             | Day-of-Month              | Month                       | Day-of-Week                        | Year(可选)             |
| ---- | ----------------- | ----------------- | ----------------- | ------------------------- | --------------------------- | ---------------------------------- | ---------------------- |
| 值   | [, - * /]，[0-59] | [, - * /]，[0-59] | [, - * /]，[0-23] | [, - * / ? L W C]，[1-31] | [, - * /]，[1-12],[JAN-DEC] | [, - * / ? L C #]，[1-7],[SUN-SAT] | [, - * /]，[1970-2099] |

[^注]: Day-of-week: 1表示星期日，以此类推

特殊符号意义：

1. \* ：匹配该域的任意值，假如在Minutes域使用 *，即表示每分钟都会触发事件。

2. ?：只可以用于Day-of-Month和Day-of-Week两个域,它实际上就是为了解决星期和天之间的冲突而产生的，因为"星期"并不在" 年月日"这种时间记法体系里面，如果设置成每个月一号同时设置每个星期一执行任务的话，任务便会不知道该哪天执行。具体用法是当Day-of-Month和Day-of-Week中其中有一个有值的话另一个就应该设置成"？"。

3. -: 表示范围，例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次 。

4. /: 表示起始时间开始触发，然后每隔固定时间触发一次，例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次。

5. ,: 表示列出枚举值值。例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次。

6. L: 表示最后，只能出现在DayofWeek和DayofMonth域，如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。

7. W:表示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份

8. LW:这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。

9. \# :用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。

   

   ### 举例

   ```CQL
   */5 * * * * ? 每隔5秒执行一次：
   0 */1 * * * ? 每隔1分钟执行一次：
   0 15 10 * * ? *	每天10点15分触发
   0 15 10 * * ? 2017	2017年每天10点15分触发
   0 * 14 * * ?	每天下午的 2点到2点59分每分触发
   0 0/5 14 * * ?	每天下午的 2点到2点59分(整点开始，每隔5分触发)
   0 0/5 14,18 * * ?	每天下午的 2点到2点59分、18点到18点59分(整点开始，每隔5分触发)
   0 0-5 14 * * ?	每天下午的 2点到2点05分每分触发
   0 15 10 ? * 6L	每月最后一周的星期五的10点15分触发
   0 15 10 ? * 6#3	每月的第三周的星期五开始触发
   ```

   







